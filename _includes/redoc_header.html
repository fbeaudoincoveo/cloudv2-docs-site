{% assign swagger = page.swagger | relative_url %}
{% assign apiName = page.title | escape | split: ' Reference' | first %}

{{ comment // Setting the ReDoc options (see https://github.com/Rebilly/ReDoc#redoc-tag-attributes) }}
<redoc spec-url='{{swagger}}' scroll-y-offset=0 suppress-warnings lazy-rendering required-props-first ></redoc>
<script src="https://rebilly.github.io/ReDoc/releases/latest/redoc.min.js"></script>

<script>
    // Highlight current site and section in site header
    $('#jsDevDocs').addClass('currentSite');
    $('#apiExplorerMenu > a').addClass('currentSection');

    // Setting an API title
    var apiName = '{{ apiName}}';
    var apiTitle = '<h2>' + apiName + '</h2>';

    // Function to wait for the rendered ReDoc DIV and inject an API title at the top of the ReDoc TOC
    function AddAPITitle() {
        if (!$('redoc-search > div.search-input-wrap').size()) {
            // Loop until ReDoc DIV exits
            window.requestAnimationFrame(AddAPITitle);
        }else {
            $('redoc-search > div.search-input-wrap').prepend(apiTitle);
        }
    }

    AddAPITitle()
</script>